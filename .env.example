# GitHub OAuth Configuration
# Create a GitHub OAuth App at: https://github.com/settings/developers

# Your GitHub OAuth App Client ID
VITE_GITHUB_CLIENT_ID=your_github_client_id_here

# Repository Configuration
VITE_WIKI_REPO_OWNER=yourusername
VITE_WIKI_REPO_NAME=my-wiki

# Release Date Configuration
# Purpose: Filter out all commits, activity, and achievements before this date
# Format: ISO 8601 date string (YYYY-MM-DDTHH:MM:SSZ)
# Example: 2025-01-01T00:00:00Z
# Leave empty to include all history
#
# Used by:
# - Contributor stats (highscore, profile stats)
# - User snapshots (PR history, commit counts)
# - Achievement system (contribution achievements, early-adopter)
#
# IMPORTANT: For GitHub Actions to use this date:
# 1. Go to Repository Settings → Secrets and variables → Actions → Variables
# 2. Create a new repository variable named: VITE_RELEASE_DATE
# 3. Set the value to the same date as below
#
# For more info, see: .claude/release-date-filtering.md
VITE_RELEASE_DATE=

# Bot Token Configuration (REQUIRED for Comments)
# Purpose: Bot account creates all comment issues (prevents users from closing them)
# Without this token, comments will be disabled entirely
#
# Setup Instructions:
# 1. Create a new GitHub account for your wiki bot (e.g., "my-wiki-bot")
# 2. Add the bot account as a collaborator to your wiki repository (with Write access)
# 3. Generate a Personal Access Token (Classic) for the bot account:
#    - Go to: https://github.com/settings/tokens
#    - Click "Generate new token (classic)"
#    - Select scopes: "repo" (full control of private repositories)
#    - Copy the generated token
# 4. Paste the bot token below
# 5. For GitHub Actions deployment, add this token to your repository secrets as WIKI_BOT_TOKEN
#    NOTE: Use WIKI_BOT_TOKEN (not GITHUB_BOT_TOKEN - GitHub reserves GITHUB_* prefix)
#
VITE_WIKI_BOT_USERNAME=slayer-wiki-bot
VITE_WIKI_BOT_TOKEN=your_bot_personal_access_token_here
WIKI_BOT_USERNAME=slayer-wiki-bot

# Anonymous Editing Configuration
# Purpose: Enable anonymous users to submit wiki edits via bot-created PRs
#
# Setup Instructions:
# 1. Get a SendGrid API key for email verification:
#    - Sign up at: https://sendgrid.com/
#    - Create an API key with "Mail Send" permissions
#    - Verify a sender email address in SendGrid
# 2. Get a Google reCAPTCHA v3 key:
#    - Go to: https://www.google.com/recaptcha/admin
#    - Register a new site with reCAPTCHA v3
#    - Copy the site key and secret key
# 3. For Netlify/Cloudflare deployment, add these to your environment secrets
#
# IMPORTANT: These are SERVER-SIDE ONLY secrets (do NOT prefix with VITE_)
# The VITE_ prefix exposes variables to the client - these must stay server-side

# SendGrid API Key (for sending verification emails)
SENDGRID_API_KEY=your_sendgrid_api_key_here

# SendGrid Sender Email (must be verified in SendGrid)
SENDGRID_FROM_EMAIL=noreply@slayerlegend.wiki

# Google reCAPTCHA v3 Secret Key (for bot detection)
RECAPTCHA_SECRET_KEY=your_recaptcha_secret_key_here

# Google reCAPTCHA v3 Site Key (public, exposed to client)
# This one CAN have VITE_ prefix since it's used client-side
VITE_RECAPTCHA_SITE_KEY=your_recaptcha_site_key_here

# Email Validation API Key (optional - for real-time email validation)
# Providers: AbstractAPI, EmailValidation.io, ZeroBounce, etc.
EMAIL_VALIDATION_API_KEY=your_email_validation_api_key_here

# Secret key for encrypting verification codes and signing tokens (generate a random string)
# IMPORTANT: This key is used to encrypt verification codes before storing in GitHub Issues
# You can generate one with: openssl rand -hex 32
# WARNING: Changing this key will invalidate all pending verification codes
EMAIL_VERIFICATION_SECRET=your_random_secret_key_here

# OpenAI API Key (optional - for content moderation)
# Purpose: AI-powered detection of inappropriate content in:
#   - Display names (anonymous edits)
#   - Edit summaries (anonymous edits + optional for authenticated)
#   - Page content (anonymous edits + optional for authenticated)
# Fallback: If not configured, uses leo-profanity package (simple word list)
#
# Setup Instructions:
# 1. Go to: https://platform.openai.com/signup (create free account)
# 2. Add payment method (required, but moderation is free)
# 3. Go to: https://platform.openai.com/api-keys
# 4. Click "Create new secret key"
# 5. Copy the API key below
#
# Pricing: FREE unlimited moderation requests (moderation endpoint has no cost)
# Note: Only the moderation endpoint is used (no charges for content filtering)
# Rate Limits: 10,000 requests/min with payment method, 3/min without
#
# Configuration: See wiki-config.json > features > editRequestCreator > contentModeration
#   - checkAnonymousEdits: true (always check anonymous edits)
#   - checkAuthenticatedEdits: false (optional - set true to check all edits)
#   - checkDisplayName: true (check display names)
#   - checkEditSummary: true (check edit summaries)
#   - checkPageContent: true (check page content - first 5000 chars)
OPENAI_API_KEY=your_openai_api_key_here

# Storage Backend Configuration
# Purpose: Configure where wiki user data is persisted (builds, loadouts, spirits, etc.)
#
# Configuration in wiki-config.json > storage:
#   - backend: "github" | "cloudflare-kv" - Storage backend type
#   - version: "v1" - Data model version (for schema evolution)
#   - github: { owner, repo } - GitHub repository settings
#   - cloudflare: { keyPrefix, namespaceName } - Cloudflare KV settings
#   - migration: { enabled, sourceBackend, mode } - Migration settings
#
# GitHub Backend (Default):
# - Uses GitHub Issues for user data (one issue per user per type)
# - Uses GitHub Comments for weapon submissions
# - Requires: WIKI_BOT_TOKEN environment variable
# - Benefits: Free for public repos, built-in version control
# - Drawbacks: Slower (200-500ms), rate limits apply
#
# Cloudflare KV Backend:
# - Uses Cloudflare Workers KV key-value store
# - Requires: KV namespace binding in wrangler.toml
# - Benefits: Very fast (single-digit ms), generous free tier
# - Drawbacks: Requires Cloudflare Workers
# - Setup:
#   1. Create KV namespace: wrangler kv:namespace create "SLAYER_WIKI_DATA"
#   2. Add to wrangler.toml:
#      [[kv_namespaces]]
#      binding = "SLAYER_WIKI_DATA"
#      id = "your-kv-namespace-id"
#   3. Update wiki-config.json:
#      "storage": {
#        "backend": "cloudflare-kv",
#        "version": "v1",
#        "cloudflare": {
#          "keyPrefix": "slayerwiki",
#          "namespaceName": "SLAYER_WIKI_DATA"
#        }
#      }
#
# Migration (Gradual Data Transfer):
# Enable migration to gradually move data from GitHub to Cloudflare KV:
#   "migration": {
#     "enabled": true,
#     "sourceBackend": "github",
#     "mode": "read-through"
#   }
# - Read-through mode: Check KV first, fallback to GitHub, cache result
# - Cutover mode: Only use KV (after migration complete)
#
# Data Versioning:
# - Version labels (GitHub): data-version:v1
# - Version keys (KV): slayerwiki:user:123:skill-builds:v1
# - Allows schema evolution without breaking changes
#
# Email Verification Storage:
# Email verification codes use the same storage backend as user data.
#
# - Cloudflare KV: Auto-expires after TTL (10 minutes by default)
#   * No cleanup workflow needed - KV automatically deletes expired keys
#   * Keys: slayerwiki:verification:{emailHash}
#
# - GitHub Issues: Requires cleanup workflow (cleanup-expired-verifications.yml)
#   * Comments on [Email Verification] issue with email-verification label
#   * GitHub Action runs daily to delete expired verification codes
#
# No additional environment variables required for storage
# (WIKI_BOT_TOKEN is already configured above)
